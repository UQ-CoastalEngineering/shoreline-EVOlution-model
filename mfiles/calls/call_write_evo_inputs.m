clear all; close all
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Load Prepared EVO Inputs % lookup % -------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
case_name='example';

load(['./../cases/',case_name,'/matfiles/',case_name,'.mat'])

run_dir=['./../../runs/',case_name,'/'];
fun_dir=['./../functions/write/'];

name=[run_dir,'/input/',case_name];

nc_file=[run_dir,'/input/',case_name,'_lookup.nc'];
delete(nc_file)

addpath(fun_dir)

disp(['~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'])
disp(['Writing ',case_name,' to ',run_dir])
disp(['~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'])


if exist([run_dir])~=7;
       mkdir([run_dir])
       mkdir([run_dir,'input'])
       mkdir([run_dir,'input/log/'])
       mkdir([run_dir,'output'])
       mkdir([run_dir,'processed'])
end




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% List of Potential EVO Inputs % ------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% grid %% chainage, base_x, base_y, end_x, end_y -%---%----%----%----%----%----%----%----%----%----%----%
variable{01}='grid';
% icond %% chainage, x0, z0, x1, z1, dx ----%----%----%----%----%----%----%----%----%----%----%----%----%
variable{02}='icond';
% groynes %% chainage, groyne_x, start_time, end_time, comment -%----%----%----%----%----%----%----%----%
variable{03}='groyne';
% seawall %% chainage, wall_x, wall_z -%----%----%----%----%----%----%----%----%----%----%----%----%----%
variable{04}='seawall';
% xpar %% chainage, z_dune, s_dune, a, s_trans, s_off, z_off, ke, ka, hb_min, description ----%----%----%
variable{05}='xpar';
% waves %% time, wvht, wvper, wvdir ---%----%----%----%----%----%----%----%----%----%----%----%----%----%
variable{06}='wave';
% wl %% time, wl --%----%----%----%----%----%----%----%----%----%----%----%----%----%----%----%----%----%
variable{07}='wl';
% transport %% time, transport ---%----%----%----%----%----%----%----%----%----%----%----%----%----%----%
variable{08}='transport';
% xsect_ids %% chainage, id -%----%----%----%----%----%----%----%----%----%----%----%----%----%----%----%
variable{09}='xsect_ids';
% xsect_ids_eq %%  chainage, id --%----%----%----%----%----%----%----%----%----%----%----%----%----%----%
variable{10}='xsect_ids_eq';

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Write Available EVO Inputs % --------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

for i=1:length(variable);
    if exist(variable{i})>0;
        statement=['write_evo_',variable{i},'(',variable{i},',','''',name,'''',');'];
        eval(statement);
    end
end

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Write Available EVO Inputs % --------------------------------------------------------------------------
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
if isfield(lookup,'D')>0
    statement=['write_nc_evo(lookup,','''',nc_file,'''',');'];
    eval(statement);
end

disp(['~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'])
disp(['Finished writing ',case_name,' to ',run_dir])
disp(['~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'])
